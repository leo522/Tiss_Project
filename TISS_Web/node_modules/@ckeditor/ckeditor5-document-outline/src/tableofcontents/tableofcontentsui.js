/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ButtonView as _0x22a1b7,MenuBarMenuListItemButtonView as _0x4809cc}from'ckeditor5/src/ui.js';import{CKEditorError as _0x457943}from'ckeditor5/src/utils.js';import{Plugin as _0x47c4d5}from'ckeditor5/src/core.js';import{icons as _0x5780d6}from'ckeditor5-collaboration/src/collaboration-core.js';export default class s extends _0x47c4d5{static get['pluginName'](){return'TableOfContentsUI';}constructor(_0x3b25ce){super(_0x3b25ce),this['_licenseKeyCheckInterval']=null;}['init'](){const _0xdb2f11=this['editor'];_0xdb2f11['ui']['componentFactory']['add']('tableOfContents',()=>{const _0x35f6a1=this['_createButton'](_0x22a1b7);return _0x35f6a1['tooltip']=!0x0,_0x35f6a1;}),_0xdb2f11['ui']['componentFactory']['add']('menuBar:tableOfContents',()=>this['_createButton'](_0x4809cc)),this['licenseKey']=_0xdb2f11['config']['get']('licenseKey');const _0x298529=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x3d8145;for(const _0x343b78 in _0x298529){const _0x447942=_0x343b78,_0x11bb13=_0x298529[_0x447942];if('tableOfContentsLicenseKeyTrial'===_0x11bb13||'tableOfContentsLicenseKeyInvalid'===_0x11bb13||'tableOfContentsLicenseKeyValid'===_0x11bb13||'tableOfContentsLicenseKeyTrialLimit:operations'===_0x11bb13){delete _0x298529[_0x447942],_0x3d8145=_0x11bb13;break;}}if('tableOfContentsLicenseKeyInvalid'===_0x3d8145)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x457943('table-of-contents-invalid-license-key',null);if('tableOfContentsLicenseKeyTrial'===_0x3d8145&&console['info']('You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20table\x20of\x20contents\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.'),'tableOfContentsLicenseKeyTrialLimit:operations'===_0x3d8145)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x457943('table-of-contents-trial-license-key-reached-limit-changes',null);'tableOfContentsLicenseKeyValid'===_0x3d8145&&clearInterval(this['_licenseKeyCheckInterval']);},0x3e8);}['_createButton'](_0x17263a){const _0x39bf33=this['editor'],t=_0x39bf33['locale']['t'],_0x46f8ce=_0x39bf33['commands']['get']('insertTableOfContents'),_0x11739c=new _0x17263a(_0x39bf33['locale']);return _0x11739c['set']({'label':t('Table\x20of\x20contents'),'icon':_0x5780d6['tableOfContents']}),_0x11739c['bind']('isEnabled')['to'](_0x46f8ce,'isEnabled'),this['listenTo'](_0x11739c,'execute',()=>{_0x39bf33['execute']('insertTableOfContents'),_0x39bf33['editing']['view']['focus']();}),_0x11739c;}['destroy'](){this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}}