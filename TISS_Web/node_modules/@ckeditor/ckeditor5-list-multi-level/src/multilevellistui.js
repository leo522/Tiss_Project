/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x3f4998}from'ckeditor5/src/core.js';import{CKEditorError as _0x4cb953}from'ckeditor5/src/utils.js';import{ButtonView as _0x45d2d9,SplitButtonView as _0x2261d0,createDropdown as _0x115a4b,MenuBarMenuListItemButtonView as _0x482fb8}from'ckeditor5/src/ui.js';import _0x48ae7b from'./ui/multilevellistview.js';import _0x6ea8d from'../theme/icons/multi-level-list.svg';export default class l extends _0x3f4998{static get['pluginName'](){return'MultiLevelListUI';}constructor(_0x425cfa){super(_0x425cfa),this['_licenseKeyCheckInterval']=null;}['init'](){const _0x4dfacb=this['editor'],t=_0x4dfacb['locale']['t'];_0x4dfacb['ui']['componentFactory']['add']('multiLevelList',function({editor:_0x3a3c5f,parentCommandName:_0x194ec1,buttonLabel:_0x2a3514,buttonIcon:_0x4df466,styleGridAriaLabel:_0x5d823e,styleDefinitions:_0x47a327}){const _0x49866b=_0x3a3c5f['commands']['get'](_0x194ec1),_0x4305a8=_0x3a3c5f['config']['get']('list.properties')||{},_0x5a4b2c=_0x3a3c5f['plugins']['has']('ListProperties'),_0x29f7dc=_0x4305a8['startIndex'];if(!_0x5a4b2c||!_0x29f7dc)return _0x41c915=>{const _0x133338=new _0x45d2d9(_0x41c915);return _0x133338['set']({'label':_0x2a3514,'icon':_0x4df466,'tooltip':!0x0,'isToggleable':!0x0}),_0x133338['bind']('isOn')['to'](_0x49866b,'value',_0x582fa2=>!!_0x582fa2),_0x133338['on']('execute',()=>{_0x3a3c5f['execute'](_0x194ec1),_0x3a3c5f['editing']['view']['focus']();}),_0x133338;};return _0x12371b=>{const _0x3ed262=_0x115a4b(_0x12371b,_0x2261d0),_0x3bcea2=_0x3ed262['buttonView'];return _0x3ed262['bind']('isEnabled')['to'](_0x49866b),_0x3ed262['class']='ck-list-styles-dropdown',_0x3bcea2['on']('execute',()=>{_0x3a3c5f['execute'](_0x194ec1),_0x3a3c5f['editing']['view']['focus']();}),_0x3bcea2['set']({'label':_0x2a3514,'icon':_0x4df466,'tooltip':!0x0,'isToggleable':!0x0}),_0x3bcea2['bind']('isOn')['to'](_0x49866b,'value',_0x1b554e=>!!_0x1b554e),_0x3ed262['once']('change:isOpen',()=>{const _0x3571db=function({editor:_0x4f1121,dropdownView:_0xf686c2,styleDefinitions:_0x306858,styleGridAriaLabel:_0x21ef32}){const _0x4ff7f6=_0x4f1121['locale'],_0x4e18a3=_0x4f1121['config']['get']('list.properties'),_0x4fa013=null;_0x4e18a3['reversed']=!0x1,_0x306858['length']||(_0x4e18a3['styles']=!0x1);const _0x3d8d94=new _0x48ae7b(_0x4ff7f6,{'styleGridAriaLabel':_0x21ef32,'enabledProperties':_0x4e18a3,'styleButtonViews':_0x4fa013});if(_0x4e18a3['startIndex']){const _0xb9071f=_0x4f1121['commands']['get']('listStart');_0x3d8d94['startIndexFieldView']['bind']('isEnabled')['to'](_0xb9071f),_0x3d8d94['startIndexFieldView']['fieldView']['bind']('value')['to'](_0xb9071f),_0x3d8d94['on']('listStart',(_0x405697,_0x6d49bd)=>_0x4f1121['execute']('listStart',_0x6d49bd));}return _0x3d8d94['delegate']('execute')['to'](_0xf686c2),_0x3d8d94;}({'editor':_0x3a3c5f,'dropdownView':_0x3ed262,'parentCommandName':_0x194ec1,'styleGridAriaLabel':_0x5d823e,'styleDefinitions':_0x47a327});_0x3ed262['panelView']['children']['add'](_0x3571db);}),_0x3ed262['on']('execute',()=>{_0x3a3c5f['editing']['view']['focus']();}),_0x3ed262;};}({'editor':_0x4dfacb,'parentCommandName':'multiLevelList','buttonLabel':t('Multi-level\x20List'),'buttonIcon':_0x6ea8d,'styleGridAriaLabel':t('Multi-level\x20list\x20styles\x20toolbar'),'styleDefinitions':[]})),_0x4dfacb['ui']['componentFactory']['add']('menuBar:multiLevelList',()=>{const _0x291bb1=_0x4dfacb['commands']['get']('multiLevelList'),_0x4a4c46=new _0x482fb8(_0x4dfacb['locale']);return _0x4a4c46['set']({'label':t('Multi-level\x20List'),'icon':_0x6ea8d}),_0x4a4c46['bind']('isEnabled')['to'](_0x291bb1),_0x4a4c46['bind']('isOn')['to'](_0x291bb1,'value',_0x4059bc=>!!_0x4059bc),_0x4a4c46['on']('execute',()=>{_0x4dfacb['execute']('multiLevelList'),_0x4dfacb['editing']['view']['focus']();}),_0x4a4c46;}),this['licenseKey']=_0x4dfacb['config']['get']('licenseKey');const _0x481f90=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x2e6326;for(const _0x46b13b in _0x481f90){const _0x8f1dfe=_0x46b13b,_0x3f5a96=_0x481f90[_0x8f1dfe];if('multiLevelListLicenseKeyTrial'===_0x3f5a96||'multiLevelListLicenseKeyInvalid'===_0x3f5a96||'multiLevelListLicenseKeyValid'===_0x3f5a96||'multiLevelListLicenseKeyTrialLimit:operations'===_0x3f5a96){delete _0x481f90[_0x8f1dfe],_0x2e6326=_0x3f5a96;break;}}if('multiLevelListLicenseKeyInvalid'===_0x2e6326)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x4cb953('multi-level-list-invalid-license-key',null);if('multiLevelListLicenseKeyTrial'===_0x2e6326&&console['info']('You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20multi\x20level\x20list\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.'),'multiLevelListLicenseKeyTrialLimit:operations'===_0x2e6326)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x4cb953('multi-level-list-trial-license-key-reached-limit-changes',null);'multiLevelListLicenseKeyValid'===_0x2e6326&&clearInterval(this['_licenseKeyCheckInterval']);},0x3e8);}['destroy'](){this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}}