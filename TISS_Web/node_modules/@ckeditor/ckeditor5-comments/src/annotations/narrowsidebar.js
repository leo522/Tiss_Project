/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x485fb2=_0x4daf;(function(_0x3f8b9c,_0x534595){const _0x2934ec=_0x4daf,_0x56b679=_0x3f8b9c();while(!![]){try{const _0x5d61f4=parseInt(_0x2934ec(0x13d))/0x1*(parseInt(_0x2934ec(0x161))/0x2)+-parseInt(_0x2934ec(0x19f))/0x3+-parseInt(_0x2934ec(0x15c))/0x4+parseInt(_0x2934ec(0x180))/0x5+parseInt(_0x2934ec(0x163))/0x6+-parseInt(_0x2934ec(0x137))/0x7*(parseInt(_0x2934ec(0x184))/0x8)+-parseInt(_0x2934ec(0x194))/0x9*(-parseInt(_0x2934ec(0x1a2))/0xa);if(_0x5d61f4===_0x534595)break;else _0x56b679['push'](_0x56b679['shift']());}catch(_0x1ea860){_0x56b679['push'](_0x56b679['shift']());}}}(_0xfb2d,0x7cee1));import{ContextPlugin as _0x3d1e5a,Context as _0xef314f}from'ckeditor5/src/core.js';import _0x2b1272 from'./annotationsuis.js';import _0xfc03dc from'./sidebar.js';function _0xfb2d(){const _0x436dfe=['values','northArrowSouth','_setSelectedAnnotations','find','removeEventListener','delete','length','_attachListeners','attachToDom','hasDomSelection','context','_editorAnnotations','detach','rearrange','_attachToContainer','preventDefault','_selectedAnnotations','getOrderedSelectedAnnotations','balloonPanelView','keyCode','cancel','element','focusableElements','high','blur','locale','annotations','southArrowNorthWest','3044428zsUyvV','addAnnotation','Esc','narrowsidebar-attach-already-attached','unpin','406930fPScse','execute','2428086vFvTgp','stopPropagation','getSidebarItemView','uiUpdate','focus','_integrateWithEditorAnnotations','editors','getByView','addEventListener','change:container','defaultPositions','NarrowSidebar','target','isVisible','init','_annotationToNarrowView','contains','refresh','type','destroy','remove','_manuallyClosedAnnotationViews','stop','change:height','number','pluginName','plugins','register','isAttached','4723625jgRGmE','content','_domEmitter','_refreshPositioningDebounced','1615912lJwFOT','annotationType','from','activeAnnotation','set','bind','narrowsidebar-detach-not-attached','esc','_updateBalloonPosition','first','attach','_refreshPositioning','southArrowNorthEast','mousedown','_annotations','create','307629ZECrvv','southArrowNorth','setActiveAnnotation','northArrowSouthEast','clear','narrowSidebar','get','isDirty','view','_detachListeners','listenTo','965706OjpQiw','northArrowSouthWest','_destroyEditorAnnotationsIntegration','130gVxlgh','preventClosingBalloon','low','bodyCollection','set:container','_hideBalloon','refreshPositioning','ready','has','stopListening','_showBalloon','pin','EditorAnnotations','includes','resize','21NHwEUP','off','add','detachFromDom','ck-sidebar--narrow','_detachFromContainer','2EETBIg','requires','keydown'];_0xfb2d=function(){return _0x436dfe;};return _0xfb2d();}import _0x416e61 from'./view/annotationcounterbuttonview.js';import{BalloonPanelView as _0x2f98c6,BodyCollection as _0x4891be}from'ckeditor5/src/ui.js';import{CKEditorError as _0x92c0a8,DomEmitterMixin as _0x470b34,keyCodes as _0x199b60,Collection as _0x424565}from'ckeditor5/src/utils.js';function _0x4daf(_0x4d7ccd,_0x200e7f){const _0xfb2d3f=_0xfb2d();return _0x4daf=function(_0x4daf9c,_0x2c5e15){_0x4daf9c=_0x4daf9c-0x12d;let _0x347c97=_0xfb2d3f[_0x4daf9c];return _0x347c97;},_0x4daf(_0x4d7ccd,_0x200e7f);}import'../../theme/sidebar-narrow.css';import{debounce as _0x5f47e8}from'lodash-es';export default class i extends _0x3d1e5a{static get[_0x485fb2(0x13e)](){return[_0xfc03dc,_0x2b1272];}static get[_0x485fb2(0x17c)](){const _0x466141=_0x485fb2;return _0x466141(0x16e);}constructor(_0x313384){const _0x132047=_0x485fb2;super(_0x313384),this[_0x132047(0x17f)]=!0x1,this[_0x132047(0x178)]=new Set(),this[_0x132047(0x182)]=Object[_0x132047(0x193)](_0x470b34),this[_0x132047(0x172)]=new Map(),this[_0x132047(0x188)](_0x132047(0x187),null),this[_0x132047(0x15a)]=null,this[_0x132047(0x150)]=[],this[_0x132047(0x14b)]=new _0x424565(),this[_0x132047(0x183)]=_0x5f47e8(()=>{const _0x42a7ba=_0x132047;this[_0x42a7ba(0x18f)]();},0xfa,{'leading':!0x1});}[_0x485fb2(0x171)](){const _0x53bbfd=_0x485fb2;this[_0x53bbfd(0x14a)][_0x53bbfd(0x17d)][_0x53bbfd(0x19a)](_0x2b1272)[_0x53bbfd(0x17e)](_0x53bbfd(0x199),this),this[_0x53bbfd(0x1a5)]=new _0x4891be(this[_0x53bbfd(0x14a)][_0x53bbfd(0x159)]),this[_0x53bbfd(0x152)]=new _0x2f98c6(this[_0x53bbfd(0x14a)][_0x53bbfd(0x159)]),this[_0x53bbfd(0x1a5)][_0x53bbfd(0x148)](),this[_0x53bbfd(0x1a5)][_0x53bbfd(0x139)](this[_0x53bbfd(0x152)]);}[_0x485fb2(0x18e)](_0xcdeb85){const _0x5f24af=_0x485fb2;this[_0x5f24af(0x15a)]=_0xcdeb85;const _0x1e016d=this[_0x5f24af(0x14a)][_0x5f24af(0x17d)][_0x5f24af(0x19a)](_0xfc03dc),_0x40b5a8=this[_0x5f24af(0x152)];if(_0x1e016d[_0x5f24af(0x192)]=_0xcdeb85,this[_0x5f24af(0x17f)])throw new _0x92c0a8(_0x5f24af(0x15f),this);this[_0x5f24af(0x17f)]=!0x0,this[_0x5f24af(0x19e)](_0x1e016d,_0x5f24af(0x1a6),()=>{const _0x1e4e4d=_0x5f24af;this[_0x1e4e4d(0x14c)](),this[_0x1e4e4d(0x19e)](_0x1e016d,_0x1e4e4d(0x16c),_0x26b3af=>{const _0x1892da=_0x1e4e4d;_0x26b3af[_0x1892da(0x138)](),this[_0x1892da(0x18e)](_0xcdeb85);});}),_0x1e016d[_0x5f24af(0x14e)]({'viewClass':_0x5f24af(0x13b),'spaceBetweenItems':0x5});const _0x29f2ab=_0x38cdc2=>{const _0x1df152=_0x5f24af,_0x16779f=new _0x416e61(this[_0x1df152(0x14a)][_0x1df152(0x159)]);_0x1e016d[_0x1df152(0x15d)](_0x38cdc2,_0x16779f),this[_0x1df152(0x172)][_0x1df152(0x188)](_0x38cdc2,_0x16779f),_0x16779f[_0x1df152(0x189)](_0x1df152(0x19b),_0x1df152(0x185),_0x1df152(0x17b))['to'](_0x38cdc2[_0x1df152(0x19c)],_0x1df152(0x19b),_0x1df152(0x175),_0x1df152(0x146)),_0x16779f['on'](_0x1df152(0x162),()=>{const _0x3f7bea=_0x1df152;this[_0x3f7bea(0x178)][_0x3f7bea(0x198)](),_0x40b5a8[_0x3f7bea(0x181)][_0x3f7bea(0x18d)]!==_0x38cdc2[_0x3f7bea(0x19c)]?(this[_0x3f7bea(0x132)](_0x38cdc2),_0x38cdc2[_0x3f7bea(0x19c)][_0x3f7bea(0x155)][_0x3f7bea(0x167)](),this[_0x3f7bea(0x196)](_0x38cdc2)):this[_0x3f7bea(0x196)](null);});};for(const _0x509154 of _0xcdeb85)_0x29f2ab(_0x509154);this[_0x5f24af(0x19e)](_0xcdeb85,_0x5f24af(0x139),(_0x406182,_0x13fe10)=>{_0x29f2ab(_0x13fe10);}),this[_0x5f24af(0x19e)](_0xcdeb85,_0x5f24af(0x177),(_0x4886ce,_0x53f8f6,_0x295bed)=>{const _0x388dea=_0x5f24af;this[_0x388dea(0x172)][_0x388dea(0x19a)](_0x53f8f6)[_0x388dea(0x176)](),this[_0x388dea(0x172)][_0x388dea(0x145)](_0x53f8f6),_0x1e016d[_0x388dea(0x14d)]({'removedAnnotation':_0x53f8f6,'previousAnnotation':_0xcdeb85[_0x388dea(0x19a)](_0x295bed-0x1),'nextAnnotation':_0xcdeb85[_0x388dea(0x19a)](_0x295bed+0x1)}),_0x53f8f6===this[_0x388dea(0x187)]&&this[_0x388dea(0x196)](null);},{'priority':_0x5f24af(0x1a4)}),this[_0x5f24af(0x19e)](_0xcdeb85,_0x5f24af(0x167),(_0xcfb1e7,_0x2927af)=>{const _0x2449ae=_0x5f24af;this[_0x2449ae(0x196)](_0x2927af);}),this[_0x5f24af(0x19e)](_0xcdeb85,_0x5f24af(0x158),()=>{const _0x524484=_0x5f24af;this[_0x524484(0x196)](null);}),this[_0x5f24af(0x182)][_0x5f24af(0x19e)](document,_0x5f24af(0x13f),(_0x393666,_0xf3f7ba)=>{const _0x3836c4=_0x5f24af;_0xf3f7ba[_0x3836c4(0x153)]===_0x199b60[_0x3836c4(0x18b)]&&_0x40b5a8[_0x3836c4(0x170)]&&(this[_0x3836c4(0x178)][_0x3836c4(0x139)](_0x40b5a8[_0x3836c4(0x181)][_0x3836c4(0x18d)]),this[_0x3836c4(0x12d)](),_0xf3f7ba[_0x3836c4(0x164)](),_0xf3f7ba[_0x3836c4(0x14f)]());}),this[_0x5f24af(0x182)][_0x5f24af(0x19e)](document,_0x5f24af(0x191),(_0x37697b,_0x2a6931)=>{const _0x5ba8a6=_0x5f24af,_0x395fa7=_0x2a6931[_0x5ba8a6(0x16f)];_0x40b5a8[_0x5ba8a6(0x170)]&&_0x40b5a8[_0x5ba8a6(0x155)][_0x5ba8a6(0x173)](_0x395fa7)||_0x1e016d[_0x5ba8a6(0x19c)][_0x5ba8a6(0x155)][_0x5ba8a6(0x173)](_0x395fa7)||_0x37697b[_0x5ba8a6(0x1a3)]||this[_0x5ba8a6(0x187)]&&this[_0x5ba8a6(0x187)][_0x5ba8a6(0x156)][_0x5ba8a6(0x143)](_0x9c0653=>_0x9c0653[_0x5ba8a6(0x173)](_0x395fa7))||(this[_0x5ba8a6(0x178)][_0x5ba8a6(0x198)](),this[_0x5ba8a6(0x12d)](),this[_0x5ba8a6(0x196)](null));});const _0x57fe04=this[_0x5f24af(0x14a)]instanceof _0xef314f?this[_0x5f24af(0x14a)][_0x5f24af(0x169)]:new _0x424565([this[_0x5f24af(0x14a)]]);for(const _0x47e2fc of _0x57fe04)this[_0x5f24af(0x168)](_0x47e2fc);this[_0x5f24af(0x19e)](_0x57fe04,_0x5f24af(0x139),(_0xa3a43a,_0x489782)=>{const _0x344e15=_0x5f24af;this[_0x344e15(0x19e)](_0x489782,_0x344e15(0x12f),()=>{const _0x567802=_0x344e15;this[_0x567802(0x168)](_0x489782);});}),this[_0x5f24af(0x19e)](_0x57fe04,_0x5f24af(0x177),(_0x5497df,_0x4d1e5d)=>{const _0x59bc6b=_0x5f24af;_0x4d1e5d[_0x59bc6b(0x17d)][_0x59bc6b(0x130)](_0x59bc6b(0x134))&&this[_0x59bc6b(0x1a1)](_0x4d1e5d[_0x59bc6b(0x17d)][_0x59bc6b(0x19a)](_0x59bc6b(0x134)));}),window[_0x5f24af(0x16b)](_0x5f24af(0x136),this[_0x5f24af(0x183)]),this[_0x5f24af(0x18f)]();}[_0x485fb2(0x196)](_0x27ee4d){const _0x33b41c=_0x485fb2;if(_0x27ee4d===this[_0x33b41c(0x187)])return;const _0x23e72f=this[_0x33b41c(0x14a)][_0x33b41c(0x17d)][_0x33b41c(0x19a)](_0xfc03dc);if(_0x23e72f[_0x33b41c(0x174)]({'blurredAnnotation':this[_0x33b41c(0x187)],'activatedAnnotation':_0x27ee4d,'disableAnimationOnActivatedAnnotation':!0x0}),_0x27ee4d)_0x23e72f[_0x33b41c(0x165)](_0x27ee4d)?this[_0x33b41c(0x132)](_0x27ee4d):this[_0x33b41c(0x12d)]();else this[_0x33b41c(0x12d)]();this[_0x33b41c(0x187)]=_0x27ee4d;}[_0x485fb2(0x14c)](){const _0x4a8748=_0x485fb2;if(!this[_0x4a8748(0x17f)])throw new _0x92c0a8(_0x4a8748(0x18a),this);this[_0x4a8748(0x196)](null);const _0x5b625c=this[_0x4a8748(0x14a)][_0x4a8748(0x17d)][_0x4a8748(0x19a)](_0xfc03dc);this[_0x4a8748(0x12d)](),Array[_0x4a8748(0x186)](this[_0x4a8748(0x172)][_0x4a8748(0x140)](),_0xaced9c=>_0xaced9c[_0x4a8748(0x176)]()),this[_0x4a8748(0x172)][_0x4a8748(0x198)](),_0x5b625c[_0x4a8748(0x13c)](this[_0x4a8748(0x15a)]),this[_0x4a8748(0x131)](),this[_0x4a8748(0x182)][_0x4a8748(0x131)](),this[_0x4a8748(0x14a)]instanceof _0xef314f&&this[_0x4a8748(0x131)](this[_0x4a8748(0x14a)][_0x4a8748(0x169)]);for(const _0x35cba4 of Array[_0x4a8748(0x186)](this[_0x4a8748(0x14b)]))this[_0x4a8748(0x1a1)](_0x35cba4);window[_0x4a8748(0x144)](_0x4a8748(0x136),this[_0x4a8748(0x183)]),this[_0x4a8748(0x183)][_0x4a8748(0x154)](),this[_0x4a8748(0x150)]=[],this[_0x4a8748(0x17f)]=!0x1,this[_0x4a8748(0x15a)]=null;}[_0x485fb2(0x176)](){const _0x45c0f2=_0x485fb2;this[_0x45c0f2(0x17f)]&&this[_0x45c0f2(0x14c)](),this[_0x45c0f2(0x1a5)][_0x45c0f2(0x13a)]();}[_0x485fb2(0x168)](_0x35dc46){const _0x18ff4d=_0x485fb2;if(!_0x35dc46[_0x18ff4d(0x17d)][_0x18ff4d(0x130)](_0x18ff4d(0x134)))return;const _0xb934a1=_0x35dc46[_0x18ff4d(0x17d)][_0x18ff4d(0x19a)](_0x18ff4d(0x134)),_0x1d22f7=this[_0x18ff4d(0x14a)][_0x18ff4d(0x17d)][_0x18ff4d(0x19a)](_0xfc03dc),_0x214c81=this[_0x18ff4d(0x15a)],_0x374e5c=this[_0x18ff4d(0x152)],_0x563196=()=>{const _0x1d6ca7=_0x18ff4d,_0x495945=_0xb934a1[_0x1d6ca7(0x151)]({'annotations':this[_0x1d6ca7(0x15a)],'activeAnnotation':this[_0x1d6ca7(0x187)]});this[_0x1d6ca7(0x142)](_0x495945),this[_0x1d6ca7(0x196)](_0x495945[0x0]||null);};this[_0x18ff4d(0x19e)](_0xb934a1,_0x18ff4d(0x174),_0x563196),this[_0x18ff4d(0x19e)](_0xb934a1,_0x18ff4d(0x158),(_0x7312b5,{isAnnotationTracked:_0x44ec99})=>{const _0x13ba2d=_0x18ff4d;this[_0x13ba2d(0x187)]&&_0x44ec99(this[_0x13ba2d(0x187)])&&(this[_0x13ba2d(0x142)]([]),this[_0x13ba2d(0x196)](null));}),this[_0x18ff4d(0x19e)](_0xb934a1,_0x18ff4d(0x166),()=>{const _0x447062=_0x18ff4d;this[_0x447062(0x183)]();}),this[_0x18ff4d(0x19e)](_0x214c81,_0x18ff4d(0x158),_0x1c5a32=>{const _0x40088d=_0x18ff4d;_0xb934a1[_0x40088d(0x149)]()&&_0x1c5a32[_0x40088d(0x179)]();},{'priority':_0x18ff4d(0x157)}),this[_0x18ff4d(0x19e)](this[_0x18ff4d(0x182)],_0x18ff4d(0x191),(_0x302953,_0x3b2ca2)=>{const _0x108503=_0x18ff4d,_0x3d60b3=_0x3b2ca2[_0x108503(0x16f)];_0x374e5c[_0x108503(0x170)]&&_0x374e5c[_0x108503(0x155)][_0x108503(0x173)](_0x3d60b3)||_0x1d22f7[_0x108503(0x19c)][_0x108503(0x155)][_0x108503(0x173)](_0x3d60b3)||this[_0x108503(0x187)]&&_0xb934a1[_0x108503(0x149)]()&&(_0x563196(),_0x302953[_0x108503(0x1a3)]=!0x0);},{'priority':_0x18ff4d(0x157)}),this[_0x18ff4d(0x14b)][_0x18ff4d(0x139)](_0xb934a1);}[_0x485fb2(0x1a1)](_0x4c9605){const _0x153248=_0x485fb2;_0x4c9605&&(this[_0x153248(0x131)](_0x4c9605),this[_0x153248(0x14b)][_0x153248(0x177)](_0x4c9605));}[_0x485fb2(0x142)](_0x387ff5){const _0x18bc60=_0x485fb2;for(const _0x37fad0 of this[_0x18bc60(0x150)])_0x387ff5[_0x18bc60(0x135)](_0x37fad0)||this[_0x18bc60(0x178)][_0x18bc60(0x145)](_0x37fad0[_0x18bc60(0x19c)]);this[_0x18bc60(0x150)]=_0x387ff5;}[_0x485fb2(0x18f)](){const _0x1726fa=_0x485fb2,_0x4a0f75=this[_0x1726fa(0x152)];this[_0x1726fa(0x15a)][_0x1726fa(0x12e)](),_0x4a0f75[_0x1726fa(0x170)]&&this[_0x1726fa(0x18c)]();}[_0x485fb2(0x132)](_0x11356a){const _0x4a195a=_0x485fb2;if(this[_0x4a195a(0x178)][_0x4a195a(0x130)](_0x11356a[_0x4a195a(0x19c)]))return;const _0x41366b=this[_0x4a195a(0x152)][_0x4a195a(0x181)][_0x4a195a(0x18d)];_0x41366b!==_0x11356a[_0x4a195a(0x19c)]?(_0x41366b&&this[_0x4a195a(0x19d)](_0x41366b),this[_0x4a195a(0x147)](_0x11356a[_0x4a195a(0x19c)]),this[_0x4a195a(0x152)][_0x4a195a(0x181)][_0x4a195a(0x198)](),this[_0x4a195a(0x152)][_0x4a195a(0x181)][_0x4a195a(0x139)](_0x11356a[_0x4a195a(0x19c)]),this[_0x4a195a(0x18c)]()):this[_0x4a195a(0x18c)]();}[_0x485fb2(0x18c)](){const _0x3ce028=_0x485fb2,_0x136376=this[_0x3ce028(0x152)][_0x3ce028(0x181)][_0x3ce028(0x18d)],_0x1d6b00=_0x136376&&this[_0x3ce028(0x15a)][_0x3ce028(0x16a)](_0x136376);if(!_0x1d6b00||!this[_0x3ce028(0x172)][_0x3ce028(0x130)](_0x1d6b00))return;const _0x4f4c62=this[_0x3ce028(0x172)][_0x3ce028(0x19a)](_0x1d6b00)[_0x3ce028(0x155)],_0x271fd5=(function(){const _0x49d519=_0x3ce028,_0x5ba688=_0x2f98c6[_0x49d519(0x16d)];return[_0x5ba688[_0x49d519(0x190)],_0x5ba688[_0x49d519(0x197)],_0x5ba688[_0x49d519(0x195)],_0x5ba688[_0x49d519(0x141)],_0x5ba688[_0x49d519(0x15b)],_0x5ba688[_0x49d519(0x1a0)]];}());this[_0x3ce028(0x152)][_0x3ce028(0x133)]({'target':_0x4f4c62,'positions':_0x271fd5});}[_0x485fb2(0x12d)](){const _0x496b7c=_0x485fb2,_0x5d385a=this[_0x496b7c(0x152)],_0x30afd0=_0x5d385a[_0x496b7c(0x181)][_0x496b7c(0x18d)];_0x30afd0&&(this[_0x496b7c(0x19d)](_0x30afd0),_0x5d385a[_0x496b7c(0x160)](),_0x5d385a[_0x496b7c(0x181)][_0x496b7c(0x198)]());}[_0x485fb2(0x147)](_0x52fb48){const _0x23818f=_0x485fb2;this[_0x23818f(0x19e)](_0x52fb48,_0x23818f(0x17a),()=>this[_0x23818f(0x18c)]()),this[_0x23818f(0x19e)](_0x52fb48,_0x23818f(0x15e),(_0x508d84,_0x58cc13)=>{const _0x134b80=_0x23818f;this[_0x134b80(0x178)][_0x134b80(0x139)](_0x52fb48),this[_0x134b80(0x12d)](),_0x58cc13();});}[_0x485fb2(0x19d)](_0x40376a){const _0x21dc27=_0x485fb2;this[_0x21dc27(0x131)](_0x40376a);}}