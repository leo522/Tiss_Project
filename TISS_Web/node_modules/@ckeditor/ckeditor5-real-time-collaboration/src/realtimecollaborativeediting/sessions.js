/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x411aca=_0x5e7e;(function(_0x2d19bd,_0x1dfe44){const _0x5f4612=_0x5e7e,_0x3c9f47=_0x2d19bd();while(!![]){try{const _0x4d443d=parseInt(_0x5f4612(0x9f))/0x1+-parseInt(_0x5f4612(0xb8))/0x2+parseInt(_0x5f4612(0x9a))/0x3+parseInt(_0x5f4612(0xb3))/0x4+parseInt(_0x5f4612(0xad))/0x5+parseInt(_0x5f4612(0xa6))/0x6*(-parseInt(_0x5f4612(0xaa))/0x7)+-parseInt(_0x5f4612(0xc3))/0x8;if(_0x4d443d===_0x1dfe44)break;else _0x3c9f47['push'](_0x3c9f47['shift']());}catch(_0x4166c8){_0x3c9f47['push'](_0x3c9f47['shift']());}}}(_0x5352,0x70980));function _0x5e7e(_0x2f96ac,_0x57de08){const _0x535252=_0x5352();return _0x5e7e=function(_0x5e7ef2,_0x13faa5){_0x5e7ef2=_0x5e7ef2-0x92;let _0x2332ba=_0x535252[_0x5e7ef2];return _0x2332ba;},_0x5e7e(_0x2f96ac,_0x57de08);}import{ContextPlugin as _0x6235a1}from'ckeditor5/src/core.js';import{Collection as _0x1b8b96,CKEditorError as _0x277cbc}from'ckeditor5/src/utils.js';import _0x37c545 from'./websocketgateway.js';import{Users as _0x28b3e3}from'ckeditor5-collaboration/src/collaboration-core.js';export default class r extends _0x6235a1{static get[_0x411aca(0x96)](){const _0x86b5=_0x411aca;return _0x86b5(0xaf);}static get[_0x411aca(0xc8)](){return[_0x37c545,_0x28b3e3];}constructor(_0xfbbaec){const _0x437d1e=_0x411aca;super(_0xfbbaec),this[_0x437d1e(0x99)]=new Map(),this[_0x437d1e(0x9b)]=new Map(),this[_0x437d1e(0xb7)]=new _0x1b8b96(),this[_0x437d1e(0x9c)]=new Map(),this[_0x437d1e(0xb5)]=0x0,this[_0x437d1e(0xbe)]=this[_0x437d1e(0x93)][_0x437d1e(0xbb)][_0x437d1e(0xc2)](_0x28b3e3);}[_0x411aca(0xcb)](){const _0x5e7c30=_0x411aca,_0x106b6a=this[_0x5e7c30(0x93)][_0x5e7c30(0xbb)][_0x5e7c30(0xc2)](_0x37c545);this[_0x5e7c30(0xa3)](_0x106b6a,_0x5e7c30(0xa5),(_0x34fb3e,_0xe08d41,_0x3e2a95)=>{const _0x2930ad=_0x5e7c30;if(_0x2930ad(0x92)!==_0x3e2a95)this[_0x2930ad(0x99)][_0x2930ad(0xc5)](_0x4ab0a2=>_0x4ab0a2[_0x2930ad(0xc0)]()),this[_0x2930ad(0x9b)][_0x2930ad(0xc5)](_0x483898=>_0x483898[_0x2930ad(0xc0)]()),this[_0x2930ad(0xb7)][_0x2930ad(0xc0)]();else{for(const [_0x9e4784,_0x304718]of this[_0x2930ad(0x9c)])for(const _0xdb0c04 of _0x304718)this[_0x2930ad(0xa4)](_0x9e4784,_0xdb0c04);}}),this[_0x5e7c30(0xca)](_0x106b6a[_0x5e7c30(0xa9)]['me'],!0x0);}[_0x411aca(0x9d)](_0x230b16,_0x1f81b5){const _0x576c04=_0x411aca;if(this[_0x576c04(0x9c)][_0x576c04(0xc6)](_0x230b16))throw new _0x277cbc(_0x576c04(0xb4),null,{'channelId':_0x230b16});this[_0x576c04(0x9c)][_0x576c04(0x9e)](_0x230b16,_0x1f81b5),this[_0x576c04(0x99)][_0x576c04(0x9e)](_0x230b16,new _0x1b8b96()),this[_0x576c04(0x9b)][_0x576c04(0x9e)](_0x230b16,new _0x1b8b96()),this[_0x576c04(0xa3)](_0x1f81b5,_0x576c04(0xb0),(_0x4d8bab,_0x41e41a)=>this[_0x576c04(0xa4)](_0x230b16,_0x41e41a)),this[_0x576c04(0xa3)](_0x1f81b5,_0x576c04(0xbd),(_0x3d0dd4,_0x3357f8)=>this[_0x576c04(0xb6)](_0x230b16,_0x3357f8));for(const _0xabfbd8 of _0x1f81b5)this[_0x576c04(0xa4)](_0x230b16,_0xabfbd8);}[_0x411aca(0xa0)](_0x1cf4b0){const _0x442507=_0x411aca;if(!this[_0x442507(0x9c)][_0x442507(0xc6)](_0x1cf4b0))throw new _0x277cbc(_0x442507(0xb2),null,{'channelId':_0x1cf4b0});const _0x127143=this[_0x442507(0x9c)][_0x442507(0xc2)](_0x1cf4b0);this[_0x442507(0xc1)](_0x127143);for(const _0x33e363 of _0x127143)_0x442507(0x92)===this[_0x442507(0x93)][_0x442507(0xbb)][_0x442507(0xc2)](_0x37c545)[_0x442507(0xbc)]&&this[_0x442507(0xb6)](_0x1cf4b0,_0x33e363);this[_0x442507(0x9c)][_0x442507(0xb9)](_0x1cf4b0),this[_0x442507(0x99)][_0x442507(0xb9)](_0x1cf4b0),this[_0x442507(0x9b)][_0x442507(0xb9)](_0x1cf4b0);}get[_0x411aca(0xba)](){const _0x2a5974=_0x411aca;return this[_0x2a5974(0x93)][_0x2a5974(0xbb)][_0x2a5974(0xc2)](_0x37c545)[_0x2a5974(0xa9)][_0x2a5974(0x94)];}[_0x411aca(0xa1)](_0x138f03){const _0x1faf2e=_0x411aca;for(const _0x5a80d0 of this[_0x1faf2e(0x99)][_0x1faf2e(0xc9)]())for(const _0x5a0f73 of _0x5a80d0)if(_0x5a0f73['id']===_0x138f03)return _0x5a0f73[_0x1faf2e(0x95)];}[_0x411aca(0xab)](_0x404ea5,_0x820b7c){const _0x551ee7=_0x411aca,_0x1da142=_0x820b7c?[this[_0x551ee7(0x99)][_0x551ee7(0xc2)](_0x820b7c)]:this[_0x551ee7(0x99)][_0x551ee7(0xc9)](),_0x11fbab=new Set();for(const _0x3e66aa of _0x1da142)for(const _0x3ccfe6 of _0x3e66aa)_0x3ccfe6[_0x551ee7(0x95)]['id']===_0x404ea5['id']&&_0x11fbab[_0x551ee7(0xb0)](_0x3ccfe6['id']);return _0x11fbab;}[_0x411aca(0xc7)](_0x47b3b4){const _0xbeb60b=_0x411aca;for(const _0x2d3a16 of this[_0xbeb60b(0x99)][_0xbeb60b(0xc9)]())for(const _0x2a1e1b of _0x2d3a16)if(_0x2a1e1b[_0xbeb60b(0x95)]===_0x47b3b4)return _0x2a1e1b[_0xbeb60b(0xa8)];}[_0x411aca(0xa4)](_0x3efccf,_0x168e93){const _0x175521=_0x411aca;if(_0x175521(0x92)!==this[_0x175521(0x93)][_0x175521(0xbb)][_0x175521(0xc2)](_0x37c545)[_0x175521(0xbc)])return;const _0x481f37=_0x168e93[_0x175521(0x95)],_0x1978d3=this[_0x175521(0xbe)][_0x175521(0xc4)](_0x481f37['id'])||this[_0x175521(0xca)](_0x481f37),_0x1516e9=Object[_0x175521(0xac)]({},_0x168e93,{'user':_0x1978d3});this[_0x175521(0x99)][_0x175521(0xc2)](_0x3efccf)[_0x175521(0xb0)](_0x1516e9);const _0x506c2a=this[_0x175521(0x9b)][_0x175521(0xc2)](_0x3efccf);_0x506c2a[_0x175521(0xc6)](_0x1978d3['id'])||_0x506c2a[_0x175521(0xb0)](_0x1978d3),this[_0x175521(0xb7)][_0x175521(0xc6)](_0x1978d3['id'])||this[_0x175521(0xb7)][_0x175521(0xb0)](_0x1978d3,_0x1978d3[_0x175521(0xbf)]?0x0:void 0x0),this[_0x175521(0x97)](_0x175521(0x98)+_0x3efccf,{'channelId':_0x3efccf,'session':_0x1516e9});}[_0x411aca(0xb6)](_0x1712fa,_0x35473e){const _0x365ae1=_0x411aca;if(_0x365ae1(0x92)!==this[_0x365ae1(0x93)][_0x365ae1(0xbb)][_0x365ae1(0xc2)](_0x37c545)[_0x365ae1(0xbc)])return;const _0x277584=this[_0x365ae1(0x9b)][_0x365ae1(0xc2)](_0x1712fa),_0x405c11=_0x35473e[_0x365ae1(0x95)];_0x405c11['id']&&(this[_0x365ae1(0x99)][_0x365ae1(0xc2)](_0x1712fa)[_0x365ae1(0xbd)](_0x35473e['id']),_0x277584[_0x365ae1(0xc6)](_0x405c11['id'])&&!this[_0x365ae1(0xab)](_0x405c11,_0x1712fa)[_0x365ae1(0xa7)]&&_0x277584[_0x365ae1(0xbd)](_0x405c11['id']),this[_0x365ae1(0xb7)][_0x365ae1(0xc2)](_0x405c11['id'])&&!this[_0x365ae1(0xab)](_0x405c11)[_0x365ae1(0xa7)]&&this[_0x365ae1(0xb7)][_0x365ae1(0xbd)](_0x405c11['id']));}[_0x411aca(0xca)](_0x1f9a8e,_0x524db5){const _0x40d1b7=_0x411aca,_0x5c76b1=this[_0x40d1b7(0xbe)][_0x40d1b7(0xae)](_0x1f9a8e);return _0x524db5&&this[_0x40d1b7(0xbe)][_0x40d1b7(0xb1)](_0x1f9a8e['id']),_0x5c76b1[_0x40d1b7(0xa2)]=this[_0x40d1b7(0xb5)]++,_0x5c76b1;}}function _0x5352(){const _0x1cf3f0=['change:state','6VLpRDf','size','role','connection','814079UJjCUK','getUserSessions','assign','2740170bjkOam','addUser','Sessions','add','defineMe','sessions-unregister-not-exist','1391916HOGVWo','sessions-register-already-registered','_uniqueUsersCount','_handleSessionRemove','allConnectedUsers','1198592VqMvnM','delete','mySessionId','plugins','state','remove','_users','isMe','clear','stopListening','get','5156744gfOMrp','getUser','forEach','has','getUserRole','requires','values','_createUser','init','connected','context','sessionId','user','pluginName','fire','sessionAdd:','channelSessions','1473039zkOKZX','channelConnectedUsers','_registeredSessions','register','set','434344MvsPbi','unregister','getUserBySessionId','orderNumber','listenTo','_handleSessionAdd'];_0x5352=function(){return _0x1cf3f0;};return _0x5352();}